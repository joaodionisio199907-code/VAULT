<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAULT | Official Store</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #050505;
            color: white;
            overflow-x: hidden;
        }

        :root {
            --v-green: #76ff03;
            --v-cyan: #00e5ff;
            --v-dark: #0d0d0d;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        .glass { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        .card-v { background: #0d0d0d; border: 1px solid #1a1a1a; transition: all 1.3s ease; }
        .card-v:hover { border-color: var(--v-green); transform: translateY(-5px); }

        .reveal { opacity: 0; transform: translateY(20px); transition: all 0.6s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        .category-icon { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .cat-item:hover .category-icon { transform: scale(1.2) rotate(8deg); }

        .btn-buy { background: var(--v-cyan); color: black; font-weight: 800; border-radius: 12px; transition: 0.3s; }
        .btn-buy:hover { background: white; transform: scale(1.05); }

        .lang-dropdown { display: none; }
        .lang-dropdown.active { display: block; animation: fadeIn 0.2s ease-out; }

        #game-modal, #auth-modal { display: none; }
        #game-modal.active, #auth-modal.active { display: flex; animation: fadeIn 0.3s ease; }
        .no-scroll { overflow: hidden; }

        /* ================= LOADER ================= */
        #vault-loader{
            position:fixed;
            inset:0;
            background:radial-gradient(circle at center, #0b0b0b, #000);
            z-index:999999;
            display:flex;
            align-items:center;
            justify-content:center;
        }

        .loader-box{text-align:center}

        .loader-logo{
            width:140px;
            margin:0 auto 30px;
            filter:drop-shadow(0 0 25px var(--v-cyan));
            animation:float 2.5s ease-in-out infinite;
        }

        .loader-bar{
            width:280px;
            height:6px;
            background:rgba(255,255,255,.1);
            border-radius:10px;
            overflow:hidden;
            margin:0 auto 14px;
        }

        .loader-bar span{
            display:block;
            height:100%;
            width:40%;
            background:linear-gradient(90deg,var(--v-green),var(--v-cyan),var(--v-green));
            animation:load 1.2s linear infinite;
        }

        .loader-text{
            font-size:10px;
            letter-spacing:4px;
            font-weight:800;
            color:var(--v-cyan);
            opacity:.85;
        }

        @keyframes load{
            from{transform:translateX(-100%)}
            to{transform:translateX(300%)}
        }
        @keyframes float{
            0%,100%{transform:translateY(0)}
            50%{transform:translateY(-14px)}
        }
    </style>
</head>

<body>

<div id="vault-loader">
    <div class="loader-box">
        <img src="VAULT.png" class="loader-logo" alt="VAULT LOADING">
        <div class="loader-bar"><span></span></div>
        <div class="loader-text">LOADING VAULT...</div>
    </div>
</div>

<nav class="fixed top-0 w-full z-[100] glass px-8 py-4">
    <div class="max-w-[1440px] mx-auto flex items-center justify-between">
        <div class="flex items-center gap-10">
            <div class="flex items-center gap-2 cursor-pointer group">
                <div class="bg-[#76ff03] p-1.5 rounded-lg group-hover:rotate-12 transition-transform">
                    <i data-lucide="shield" class="text-black w-6 h-6"></i>
                </div>
                <span class="text-2xl font-black italic tracking-tighter uppercase">VAULT</span>
            </div>
            <div class="hidden lg:flex gap-6 text-[10px] font-bold uppercase tracking-widest text-gray-400">
                <a href="#" class="text-white border-b-2 border-[#76ff03] pb-1" data-key="nav-store">Store</a>
                <a href="#" class="hover:text-white transition" data-key="nav-library">Library</a>
                <a href="#" class="hover:text-white transition" data-key="nav-community">Community</a>
                <a href="#" class="hover:text-white transition" data-key="nav-news">News</a>
                <a href="#" class="text-[#76ff03] animate-pulse" data-key="nav-offers">● Special Offers</a>
            </div>
        </div>
        <div class="flex-1 max-w-xl px-10">
            <div class="relative">
                <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"></i>
                <input type="text" data-placeholder="search-placeholder" placeholder="Search games, tags, publishers..." class="w-full bg-white/5 border border-white/10 rounded-full py-2.5 pl-12 pr-4 text-xs focus:border-[#76ff03]/50 outline-none">
            </div>
        </div>
        <div class="flex items-center gap-6">
            <div class="relative">
                <button onclick="toggleLang('lang-top')" class="text-xs font-bold text-gray-400 hover:text-white flex items-center gap-1 uppercase">
                    <i data-lucide="languages" class="w-4 h-4"></i> <span class="current-lang">EN</span>
                </button>
                <div id="lang-top" class="lang-dropdown absolute top-10 right-0 bg-[#0d0d0d] border border-white/10 rounded-xl p-2 min-w-[120px] shadow-2xl">
                    <button onclick="changeLanguage('en')" class="w-full text-left px-4 py-2 text-xs hover:bg-white/5 rounded-lg">English</button>
                    <button onclick="changeLanguage('es')" class="w-full text-left px-4 py-2 text-xs hover:bg-white/5 rounded-lg">Español</button>
                </div>
            </div>
            <div class="flex items-center gap-4 text-gray-400">
                <div class="relative cursor-pointer"><i data-lucide="heart" class="w-5 h-5"></i><span class="absolute -top-2 -right-2 bg-red-500 text-white text-[8px] px-1 rounded-full">2</span></div>
                <div class="relative cursor-pointer"><i data-lucide="shopping-cart" class="w-5 h-5"></i><span id="cart-count" class="absolute -top-2 -right-2 bg-[#00e5ff] text-black text-[8px] px-1 rounded-full">3</span></div>
            </div>
            <button onclick="openAuthModal()" id="auth-btn" class="bg-[#00e5ff] text-black text-[10px] font-extrabold px-6 py-2.5 rounded-full" data-key="btn-signin">Sign In</button>
        </div>
    </div>
</nav>

<section class="pt-24 px-8 mb-16">
    <div id="hero-slider" class="max-w-[1440px] mx-auto relative h-[600px] rounded-[2.5rem] overflow-hidden group">
        <img id="hero-img" src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=1600" class="w-full h-full object-cover transition-opacity duration-700">
        <div class="absolute inset-0 bg-gradient-to-r from-black via-black/40 to-transparent"></div>
        <div class="absolute bottom-16 left-16 animate__animated animate__fadeInLeft">
            <span id="hero-tag" class="bg-red-500 text-white text-[10px] font-black px-3 py-1 rounded-md mb-4 inline-block">New Release</span>
            <h1 id="hero-title" class="text-7xl font-black mb-2 leading-none uppercase">Shadow Realm<br>Chronicles</h1>
            <p id="hero-desc" class="text-cyan-400 font-bold mb-4">Darkness Falls</p>
            <div class="flex items-center gap-2 mb-6">
                <i data-lucide="star" class="w-4 h-4 text-yellow-500 fill-current"></i>
                <span class="text-sm font-bold">4.9</span> <span class="text-gray-500 text-sm" data-key="reviews">(125K reviews)</span>
            </div>
            <div class="flex items-center gap-4">
                <div class="bg-[#76ff03]/10 border border-[#76ff03]/30 px-4 py-2 rounded-xl">
                    <span class="text-[#76ff03] font-black text-xl">-25%</span>
                    <span class="text-gray-500 line-through ml-2">$49.99</span>
                    <span class="text-white font-bold ml-2">$37.49</span>
                </div>
                <button class="btn-buy px-10 py-4" data-key="btn-buy">Buy Now</button>
            </div>
        </div>
    </div>
</section>

<section class="max-w-[1440px] mx-auto px-8 mb-12 reveal">
    <div class="text-center mb-12">
        <h2 class="text-4xl font-black uppercase italic mb-2" data-key="cat-title">Browse by Category</h2>
        <p class="text-gray-500 text-sm italic" data-key="cat-subtitle">Explore our vast collection of games across all genres</p>
    </div>
    <div class="grid grid-cols-2 md:grid-cols-8 gap-4">
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-orange-500/50">
            <div class="category-icon w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="sword" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Action</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-blue-500/50">
            <div class="category-icon w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="rocket" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Adventure</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-green-500/50">
            <div class="category-icon w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="car" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Racing</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-purple-500/50">
            <div class="category-icon w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="puzzle" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Puzzle</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-yellow-500/50">
            <div class="category-icon w-10 h-10 bg-yellow-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="users" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Multiplayer</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-cyan-500/50">
            <div class="category-icon w-10 h-10 bg-cyan-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="trophy" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Sports</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-indigo-500/50">
            <div class="category-icon w-10 h-10 bg-indigo-500 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="wand-2" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">RPG</h4>
        </div>
        <div class="cat-item bg-[#0d0d0d] p-6 rounded-2xl border border-white/5 text-center cursor-pointer hover:border-gray-500/50">
            <div class="category-icon w-10 h-10 bg-gray-700 rounded-xl flex items-center justify-center mx-auto mb-3"><i data-lucide="ghost" class="w-5 h-5"></i></div>
            <h4 class="text-[10px] font-bold uppercase">Horror</h4>
        </div>
    </div>
</section>

<section class="max-w-[1440px] mx-auto px-8 mb-24 reveal">
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-black uppercase italic">Featured in VAULT</h2>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="vault-grid">
        <p class="text-gray-500 italic">Connecting to Vault Database...</p>
    </div>
</section>

<div id="auth-modal" class="fixed inset-0 z-[300] items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-xl" onclick="closeAuthModal()"></div>
    <div class="bg-[#0d0d0d] w-full max-w-md rounded-[2rem] border border-white/10 p-10 relative z-10">
        <h2 id="auth-title" class="text-3xl font-black uppercase italic mb-2">Welcome Back</h2>
        <p id="auth-subtitle" class="text-gray-500 text-xs mb-8">Enter your credentials to access VAULT</p>
        
        <div class="space-y-4">
            <input type="email" id="auth-email" placeholder="Email Address" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm outline-none focus:border-[#76ff03]">
            <input type="password" id="auth-pass" placeholder="Password" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm outline-none focus:border-[#76ff03]">
            
            <button onclick="handleAuth()" id="auth-submit-btn" class="w-full bg-[#76ff03] text-black font-black py-4 rounded-xl hover:scale-105 transition uppercase tracking-widest text-xs mt-4">
                Sign In
            </button>
            
            <p class="text-center text-[10px] text-gray-500 mt-6">
                <span id="auth-switch-text">Don't have an account?</span> 
                <button onclick="switchAuthMode()" id="auth-switch-btn" class="text-cyan-400 font-bold ml-1">Create Account</button>
            </p>
        </div>
    </div>
</div>

<div id="game-modal" class="fixed inset-0 z-[200] items-center justify-center p-4 sm:p-8">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-xl" onclick="closeModal()"></div>
    <div class="bg-[#0d0d0d] w-full max-w-6xl max-h-[90vh] rounded-[2.5rem] border border-white/10 overflow-y-auto relative z-10 animate__animated animate__zoomIn animate__faster">
        <div class="relative h-[400px]">
            <img id="modal-banner" src="" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-[#0d0d0d] via-[#0d0d0d]/40 to-transparent"></div>
            <button onclick="closeModal()" class="absolute top-6 right-6 bg-black/50 p-3 rounded-full hover:bg-white/10 transition">
                <i data-lucide="x"></i>
            </button>
            <div class="absolute bottom-8 left-12 right-12 flex flex-col md:flex-row md:items-end justify-between gap-6">
                <div>
                    <div class="flex gap-2 mb-3">
                        <span class="bg-cyan-500 text-black text-[10px] font-black px-3 py-1 rounded-full uppercase">VAULT VERIFIED</span>
                        <span class="bg-white/10 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase" id="modal-cat"></span>
                    </div>
                    <h2 id="modal-title" class="text-5xl font-black uppercase italic italic"></h2>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <p class="text-gray-400 text-xs uppercase font-bold mb-1">Price</p>
                        <p class="text-3xl font-black text-[#76ff03]" id="modal-price"></p>
                    </div>
                    <button class="btn-buy px-10 py-4 text-lg">ADD TO CART</button>
                </div>
            </div>
        </div>
        <div class="p-12">
            <h4 class="text-cyan-400 font-bold uppercase tracking-widest text-xs mb-4">About the game</h4>
            <p id="modal-desc" class="text-gray-400 leading-relaxed max-w-3xl"></p>
        </div>
    </div>
</div>

<footer class="bg-[#020202] border-t border-white/5 pt-20 pb-10 px-8">
    <div class="max-w-[1440px] mx-auto text-center">
        <p class="text-[10px] text-gray-600">© 2024 VAULT. All rights reserved.</p>
    </div>
</footer>

<script>
    // CONFIGURACIÓN SUPABASE (RELLENA CON TUS DATOS)
    const SUPABASE_URL = 'https://ettjrnpfgbcgwflmgcjv.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_sIyzTHGZX1o4B39cjE7_Aw_WdZ2w5Px';
    const supabase = libsupabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    let isLoginMode = true;

    // --- CARGAR JUEGOS DESDE SUPABASE ---
    async function loadGames() {
        const { data: games, error } = await supabase
            .from('games')
            .select('*')
            .eq('status', 'verified');

        if (games) {
            const grid = document.getElementById('vault-grid');
            grid.innerHTML = '';
            games.forEach(game => {
                grid.innerHTML += `
                    <div class="card-v rounded-3xl overflow-hidden cursor-pointer group" onclick="openGameModal('${game.id}')">
                        <div class="relative h-48 overflow-hidden">
                            <img src="${game.image_url}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                            <div class="absolute top-4 right-4 bg-black/60 backdrop-blur-md px-2 py-1 rounded-lg text-[10px] font-bold text-cyan-400 uppercase">Vault Exclusive</div>
                        </div>
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bold text-lg uppercase leading-tight">${game.title}</h3>
                                <span class="text-[#76ff03] font-black">${game.price}€</span>
                            </div>
                            <p class="text-gray-500 text-xs mb-4">${game.category}</p>
                            <div class="flex items-center gap-2">
                                <div class="flex -space-x-2">
                                    <div class="w-6 h-6 rounded-full bg-blue-500 border-2 border-black flex items-center justify-center text-[8px]"><i data-lucide="monitor"></i></div>
                                </div>
                                <span class="text-[10px] text-gray-400 ml-auto flex items-center gap-1"><i data-lucide="star" class="w-3 h-3 text-yellow-500 fill-current"></i> 4.9</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            lucide.createIcons();
        }
    }

    // --- LÓGICA DEL MODAL DE JUEGO ---
    async function openGameModal(gameId) {
        const { data: game } = await supabase.from('games').select('*').eq('id', gameId).single();
        if(game) {
            document.getElementById('modal-title').innerText = game.title;
            document.getElementById('modal-desc').innerText = game.description;
            document.getElementById('modal-price').innerText = game.price + '€';
            document.getElementById('modal-cat').innerText = game.category;
            document.getElementById('modal-banner').src = game.banner_url;
            
            document.getElementById('game-modal').classList.add('active');
            document.body.classList.add('no-scroll');
        }
    }

    function closeModal() {
        document.getElementById('game-modal').classList.remove('active');
        document.body.classList.remove('no-scroll');
    }

    // --- LÓGICA DE AUTH (LOGIN/REGISTRO) ---
    function openAuthModal() {
        document.getElementById('auth-modal').classList.add('active');
    }

    function closeAuthModal() {
        document.getElementById('auth-modal').classList.remove('active');
    }

    function switchAuthMode() {
        isLoginMode = !isLoginMode;
        document.getElementById('auth-title').innerText = isLoginMode ? "Welcome Back" : "Join VAULT";
        document.getElementById('auth-submit-btn').innerText = isLoginMode ? "Sign In" : "Create Account";
        document.getElementById('auth-switch-text').innerText = isLoginMode ? "Don't have an account?" : "Already have an account?";
        document.getElementById('auth-switch-btn').innerText = isLoginMode ? "Create Account" : "Sign In";
    }

    async function handleAuth() {
        const email = document.getElementById('auth-email').value;
        const password = document.getElementById('auth-pass').value;

        if (isLoginMode) {
            const { error } = await supabase.auth.signInWithPassword({ email, password });
            if (error) alert(error.message);
            else { alert("Login Successful!"); location.reload(); }
        } else {
            const { error } = await supabase.auth.signUp({ email, password });
            if (error) alert(error.message);
            else alert("Check your email for confirmation!");
        }
    }

    // --- LOADER ---
    window.addEventListener("load", () => {
        setTimeout(() => {
            const loader = document.getElementById("vault-loader");
            loader.style.opacity = "0";
            setTimeout(() => loader.remove(), 600);
            loadGames();
        }, 2000);
    });

    // --- RESTO DE TU LÓGICA (IDIOMAS, REVEAL, SLIDER) ---
    lucide.createIcons();
    function toggleLang(id) { document.getElementById(id).classList.toggle('active'); }
    
    // (Añade aquí tu función de Reveal y Slider que ya tenías)
</script>
</body>
</html>
